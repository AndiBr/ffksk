{% extends 'kiosk/base.html' %}	

{% block content %}
	
	<div class="page-header noMarginTop">
		<h4>Ein Produkt kaufen</h4>
	</div>


	{% if msg != '' and msg != None %}
		<div style="color: red;">
			{{msg}}
			<br>
		</div>
	{% endif %}

	{% if allowed == True %}

		<div class="dropdown">

			<button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownHead" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
				Produktauswahl
				<span class="caret"></span>
			</button>
			<ul class="dropdown-menu ulTopMenuWidth" aria-labelledby="dropdownHead">
				{% for item in kioskItems %}
					<li><a onclick="toSelection('{{item.produktName}}','{{item.verkaufspreis | floatformat:2}}')">{{item.produktName}}: {{item.verkaufspreis | floatformat:2}} &#8364;</a></li>
				{% endfor %}
			</ul>
		</div>	

		<br>
		
		<div id="divSelectionContainer" class="panel panel-default indented" style="display: none;">
			<br>
			<form method="POST" class="">{% csrf_token %}
				<div class="inline bigLink">
					<div id="produktName" class="inline bigLink"></div>
					:
					<div id="verkaufspreis" class="inline bigLink"></div>
					&#8364;
				</div>
				
				<br><br>

				<input type="text" name="produktName" id="produktName" style="display: none" readonly>
				<input type="text" name="verkaufspreis" id="verkaufspreis" style="display: none" readonly>
				
				<button type="submit" class="btn" style="font-weight: bold;">
					Kaufen
				</button>
			</form>	

		</div>

	{% endif %}


{% endblock %}


{% block javascript %}

	<script type="text/javascript">
		function toSelection(inputItem,inputPrice) {
			$("div#divSelectionContainer").show(400);
		    $("div#produktName").html(inputItem);
		    $("div#verkaufspreis").html(inputPrice); 
		    $("input#produktName").val(inputItem);
		    $("input#verkaufspreis").val(inputPrice);
		}
	</script>

{% endblock %}